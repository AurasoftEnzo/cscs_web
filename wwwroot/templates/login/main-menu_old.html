<!DOCTYPE html>
<html data-theme="light">

<head>
    <title>Main Menu - ERP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://cdn.tailwindcss.com/4.1.3"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.14/dist/full.min.css" rel="stylesheet">
</head>

<body class="p-6">
    <div class="navbar bg-primary text-primary-content mb-6 rounded-box">
        <div class="flex-1">
            <a class="btn btn-ghost text-xl">ERP System</a>
        </div>
        <div class="flex-none">
            <div class="dropdown dropdown-end">
                <label tabindex="0" class="btn btn-ghost">
                    <span>
                        {{UserName}}
                    </span>
                    <span class="badge badge-outline ml-2">
                        {{UserRole}}
                    </span>
                </label>
                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-50 p-2 shadow bg-base-100 rounded-box">
                    <li><a>Profile</a></li>
                    <li><a href="/logout">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="alert alert-info mb-6">
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>Welcome to the ERP System. Company: <strong>
                {{CompanyName}}
            </strong>, Year: <strong>
                {{FiscalYear}}
            </strong></span>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <a class="card bg-accent text-accent-content hover:bg-accent/90 transition">
            <div class="card-body">
                <h3 class="card-title">General Ledger</h3>
                <p>Manage financial transactions</p>
            </div>
        </a>
        <a class="card bg-secondary text-secondary-content hover:bg-secondary/90 transition">
            <div class="card-body">
                <h3 class="card-title">Inventory</h3>
                <p>Track stock and items</p>
            </div>
        </a>
        <a class="card bg-primary text-primary-content hover:bg-primary/90 transition">
            <div class="card-body">
                <h3 class="card-title">Sales</h3>
                <p>Process customer orders</p>
            </div>
        </a>
    </div>

    <script>
        window.addEventListener('unload', () => {
            const data = {
                a: 1,
                b: 2,
                c: 3
            };
            navigator.sendBeacon('/windowClosed', JSON.stringify(data));
        });        
    </script>

    <!--<script>
        // Inactivity timeout: 15 minutes
        const INACTIVITY_TIMEOUT = 15 * 60 * 1000; // 15 min

        let inactivityTimer;

        function resetTimer() {
            inactivityTimer = setTimeout(logout, INACTIVITY_TIMEOUT);
        }

        function logout() {
            localStorage.removeItem('authToken');
            localStorage.removeItem('lastActivity');
            window.location.href = '/';
        }

        function checkOnLoad() {
            const lastActivity = localStorage.getItem('lastActivity');
            if (!lastActivity) return logout();

            const elapsed = new Date() - new Date(lastActivity);
            if (elapsed > INACTIVITY_TIMEOUT) {
                logout();
            } else {
                resetTimer();
            }
        }

        // Reset timer on any user activity
        window.onload = checkOnLoad;
        document.onmousemove = resetTimer;
        document.onkeypress = resetTimer;
        document.onclick = resetTimer;
        document.onscroll = resetTimer;
        document.onfocus = resetTimer;
    </script>
    -->
</body>

</html>